<html><head><meta charset="utf-8"><title>I come across this blog when I read article about poking Spring for fun. &lt;br&gt;...</title><style>body {font: 11pt Roboto, Arial, sans-serif; max-width: 640px; margin: 24px;}.author-photo {border-radius: 50%; margin-right: 10px; width: 40px;}.author {font-weight: 500;}.main-content {margin: 15px 0 15px;}.post-title {font-weight: bold;}.location {display: block; margin-top: 15px;}.location img {float: left; margin-right: 5px; width: 20px;}.media-link {display: inline-block; max-width: 100%; vertical-align: top;}.media-link p {margin-top: 5px; max-height: 4em; overflow: scroll;}.media {max-height: 100vh; max-width: 100%;}.video-placeholder {background: black; display: flex; height: 300px; max-width: 100%; width: 640px;}.play-icon {border-bottom: 30px solid transparent; border-left: 50px solid white; border-top: 30px solid transparent; color: white; margin: auto;}.album {max-height: 800px; overflow: scroll; width: calc(100vw - 48px);}.album .media-link {margin-right: 5px; max-width: 250px;}.album .media {max-height: 250px;}.link-embed {border-top: 1px solid lightgrey; display: block; margin-top: 20px;}.link-embed img {max-width: 100%;}.inline-link-embed {display: block;}.inline-link-embed img {vertical-align: middle;}.link-title {display: inline-block; font-size: medium; font-weight: 300; padding-left: 1em;}.reshare-attribution {display: block; font-weight: bold; margin-bottom: 10px;}.poll-image {margin-bottom: 5px; max-height: 300px; max-width: 500px;}.poll-choice {align-items: center; display: flex; margin-bottom: 5px; max-width: 500px;}.poll-choice-percentage {background-color: lightblue; height: 100%; left: 0; position: absolute; z-index: -1;}.poll-choice-selected {margin-right: 5px;}.poll-choice-results {border: 1px solid lightgray; border-radius: 5px; display: flex; line-height: 40px; overflow: hidden; padding: 0 8px; position: relative;}.poll-choice-results, .poll-choice-description {flex-grow: 1; margin-right: 10px;}.poll-choice-image {width: 100%;}.poll-choice-image, .poll-choice-image img {max-height: 40px; max-width: 100px;}.poll-choice-votes {max-height: 100px; overflow: auto;}.plus-entity-embed {color: black; display: block; text-decoration: none;}.plus-entity-embed-cover-photo {max-height: 300px; max-width: 100%;}.plus-entity-embed-info {padding: 0 1em 1em;}.plus-entity-embed-info h2 {font-weight: 500; margin: 10px 0;}.plus-entity-embed-info p {font-size: small; margin: 0;}.collection-owner-avatar {border-radius: 50%; border: 2px solid white; height: 40px; margin-top: -22px;}.visibility {padding: 1em 0; border-top: 1px solid grey;}.post-activity {padding: 1em 0; border-top: 1px solid grey;}.post-kind-desc {margin-bottom: 15pt;}.comments {border-top: 1px solid gray; padding-top: 1em;}.comment + .comment {margin-top: 1em;}.comment .media-link, .comment .inline-link-embed {margin-top: 5px;}</style></head><body><div style="margin-bottom:1em;"><div style="display:flex; align-items:center"><img class="author-photo" src="https://lh3.googleusercontent.com/a-/AAuE7mAHc8Q5zJdeGZWjiL8JA6rqJEgUOHOyB2a-v_iD_w=s64-c" alt="Terrence Miao"><a href="https://plus.google.com/+TerrenceMiao" target="_blank" class="author">Terrence Miao</a> - <a target="_blank" href="https://plus.google.com/+TerrenceMiao/posts/BqjyCcD7NSF">2012-03-13 10:24:55+1100</a><span> - Updated: 2012-03-13 10:33:38+1100</span></div><div class="main-content">I come across this blog when I read article about poking Spring for fun. <br><br>This blog mentions about using Coherence as the L2 cache for Hibernate. This is very interesting, because I always believe performance issue is the biggest hinder for Hibernate in an Enterprise level JPA solution. <br><br>Another related thing I need to mention is the project Mr. B and I are working on, an Oracle proprietary implementation. With Oracle DB, SOA, Weblogic J2EE Server, JPA, Coherence ... everything locked in Oracle. So every time when we confront with JPA bugs, Coherence performance issue, just like hitting a big wall that hardly to break in. <br><br>But, we need Oracle. Not only because venders like to pay big bucks to Oracle and let them feel good, but also because &quot;J2EE server is very good at BPEL and ESB stuff&quot;, as Mr. J pointed out. So I have been thinking that is it possible just run J2EE (Weblogic) for BPEL (high level business stuff), and let everything else (Java stuff) be managed by Spring (as it should be). <br><br>Benefit from Spring&#39;s Inversion of Control especially Dependency Injection, Aspect-Oriented Programming, and other standard consistent Spring&#39;s components - Spring Web Servies, Batch, Security, Integration ..., lighter, out-of-container test framework, and powerful business products (24x7 support), so this article maybe points the direction how to let OS solutions work together with commercial proprietary applications.<br><br>Read more: How do I integrate Coherence and Hibernate? - <a rel="nofollow" target="_blank" href="http://coherence.oracle.com/pages/viewpage.action?pageId=16730" class="ot-anchor bidi_isolate" jslog="10929; track:click" dir="ltr">http://coherence.oracle.com/pages/viewpage.action?pageId=16730</a></div><a href="http://middlewaremagic.com/weblogic/?p=5407" target="_blank" class="link-embed"><h3>Hibernate and Coherence Â« Middleware Magic</h3></a></div><div class="visibility">Shared with: <a href="https://plus.google.com/108100508440823014305">Oleg Kiorsak</a>, <a href="https://plus.google.com/113772070338256541416">Bryan Murphy</a>, <a href="https://plus.google.com/103428354485877420656">Kieran Simpson</a>, <a href="https://plus.google.com/104947156656943348622">James Gemmell</a>, <a href="https://plus.google.com/117411118917273581736">Dean Budd</a>, <a href="https://plus.google.com/112201754385215382872">Terrence Miao</a>, <a href="https://plus.google.com/103428354485877420656">Kieran Simpson</a>, <a href="https://plus.google.com/104947156656943348622">James Gemmell</a>, <a href="https://plus.google.com/112201754385215382872">Terrence Miao</a></div><div class="comments"><div class="comment"><a target="_blank" href="https://plus.google.com/103428354485877420656" class="author">Kieran Simpson</a><span class="time"> - 2012-03-13 11:09:05+1100</span><div class="comment-content">There&#39;s a lot of factors here:<br><br>- I&#39;m assuming the JPA implementation is EclipseLink (TopLink).  It&#39;s probably still rubbish but at least with it being open sourced now you&#39;ve got something slightly better to work with.<br><br>- Depending on which JEE spec your app server is compliant with you might be able to leverage some of the new features of JEE 6 that mimic Spring.<br><br>- Failing all else, register Spring listeners in the appropriate places in your JEE app.  I quite like hosting Spring apps in an app server as the server takes care of the infrastructure (eg: DataSources) and Spring can easily get references from JNDI (one line of config!!).  We have Spring registered as a Servlet listener so it does all the important work with JBoss providing the plumbing.  Given Weblogic would probably also be JTA compliant (and all that other distributed transaction nonsense you might need for dealing with the Oracle BHELL beast) you get the best of both worlds.<br><br>I&#39;d ditch Coherence though :p ;)</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+TerrenceMiao" class="author">Terrence Miao</a><span class="time"> - 2012-03-13 11:50:08+1100</span><div class="comment-content">Many thanks for your thought K!<br><br>- Yep, current JPA implementation in Weblogic is EclipseLink (buggy).<br>- Weblogic 10 is only JEE 5 compatible. JEE 6 support you have to wait till Weblogic 12 released.<br>- Agree, still need Weblogic does the application plumbing work as many as possible. <br>- Have to stick with Coherence. Our implementation of coherence in our project is inappropriate because this memory cache is used to hold data that is updated frequently. This caused performance downgrade especially when to deal with big data set in the production environment.<br><br>BTW,  distributed object model in JEE, in a lot cases, is abused. The damage caused by the complexity and loss of performant is bigger than the gain of the distributed architecture. Give me an example of a successful distributed JEE solution.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+DeanBudd" class="author">Dean Budd</a><span class="time"> - 2012-03-13 12:20:45+1100</span><div class="comment-content">Just a quick comment. Don&#39;t underestimate the power of the Web when it comes to Orchestration of Business Processes. HATEOAS is an extremely powerful paradigm that leverages the scalability of the Web... Web Scale! ;) I would SERIOUSLY contemplate ditching BPEL and learning how to harness the scalability of The Net. <br>Also, as you all know, I&#39;ve become very disenchanted with ORM&#39;s over the last decade.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+DeanBudd" class="author">Dean Budd</a><span class="time"> - 2012-03-13 12:23:31+1100</span><div class="comment-content">With ORM&#39;s (especially in an Enterprise environment) you ALWAYS hit a point where you spend more time trying to tune and scale them than the time you saved by using them in the first place (in my experience)</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/103428354485877420656" class="author">Kieran Simpson</a><span class="time"> - 2012-03-13 12:26:33+1100</span><div class="comment-content">With the HATEOAS paradigm, the major benefit I would add is that if gives you more flexibility to change the routes through the state machine rather than having to edit the state machine (ie: the BPEL) and redeploy it.<br><br>It is harder however to understand the state machine as a whole, so I think there&#39;s money to be made in a tool that can process the web of RESTful services and produce a pretty picture for the BAs :)</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+DeanBudd" class="author">Dean Budd</a><span class="time"> - 2012-03-13 12:28:42+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/112201754385215382872" oid="112201754385215382872" >Terrence Miao</a></span>  I agree. I would get as far away from the Distributed Object paradigm as possible. We have to take a SERIOUS look at the real world systems out there that work. eBay, Amazon, Facebook and study the way they do things. There is no Oracle in the world of real scalability.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+DeanBudd" class="author">Dean Budd</a><span class="time"> - 2012-03-13 12:30:15+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/103428354485877420656" oid="103428354485877420656" >Kieran Simpson</a></span>  +1 (I can&#39;t +1 your comment using my phone)</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+TerrenceMiao" class="author">Terrence Miao</a><span class="time"> - 2012-03-13 12:46:47+1100</span><span> - Updated: 2012-03-13 12:50:26+1100</span><div class="comment-content">Good one Deano. You should teach people the reality of ORM. <br><br>I had an interview with one of my previous employers the other day. I told two people on the panel that you should be very careful about if you use Hibernate as one-size-for-all ORM solution for large data set due to coming up performance issue hit in later stage. <br><br>They asked how to tune for a better performance. I said, partition database, using memory cache (db in memory) improve db I/O throughout, replacing Hibernate with JDBC.<br><br>Furthermore, I hated they asked my opinion about pair programming in their third question. As I said always having another pair of eyes on the codes (codes review) is also very beneficial and effective.<br><br>Not very happy with my &quot;honest&quot; replies, the interview was finished in just 20 minutes.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+DeanBudd" class="author">Dean Budd</a><span class="time"> - 2012-03-13 14:08:53+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/112201754385215382872" oid="112201754385215382872" >Terrence Miao</a></span>  That is probably a good indicator that you shouldn&#39;t work there ;)</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/104947156656943348622" class="author">James Gemmell</a><span class="time"> - 2012-03-14 09:46:02+1100</span><div class="comment-content">Buggy software aside, I like the concept of being able to use Coherence as a distributed, shared 2nd level cache for JPA. Using JPA as a backing store for Coherence sounds useful too. Plugging in Coherence to solve a scalabiity problem baked into the design sounds like the war has been lost already and no technology is going to provide the magic bullet. (Woohoo, metaphor soup.)<br><br>There&#39;s a an obvious difference between states and events. How important is it that the events change the state in realtime? In entity-speak this implies finding the current state, updating it then writing it back while taking care to prevent concurrent updates. This will <b>always</b> be slower than a simply persisting events which can be processed more optimally offline or out-of-band, allowing you to smooth out spikes in traffic.<br><br>Talking of  traffic, a certain road tolling solution with which we are intimately familiar had the state-update design baked into the use cases leaving them with bugger all room to move when the inevitable scalability, concurrency and platform bugs surfaced. All of this to satisfy the rather questionable business requirement of &quot;10 mins from roadside to account.&quot;</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+TerrenceMiao" class="author">Terrence Miao</a><span class="time"> - 2012-03-14 10:16:57+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/104947156656943348622" oid="104947156656943348622" >James Gemmell</a></span> In the previous project, Coherence is used to load &quot;NEW&quot; state messages, then update messages state to &quot;DISPATCHED&quot;, &quot;PROCESSING&quot;, &quot;PROCESSED&quot;, &quot;FAILED&quot;... depends on the message processing status. Coherence is required to keep re-indexing state column when state change happened at specified interval. At the same time, it needs to write back messages to database if &quot;PROCESSED&quot; or &quot;FAILED&quot;, load &quot;NEW&quot; messages from db and re-index again. <br><br>Coherence is used a generic database, and a lot read / write access between memory and hard disk. When switch on the production, with 50 millions messages in backend db, you can imagine what performance like.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/103428354485877420656" class="author">Kieran Simpson</a><span class="time"> - 2012-03-14 10:43:05+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/104947156656943348622" oid="104947156656943348622" >James Gemmell</a></span> Of course the PHP guys have been doing this for years with Memcached.  It&#39;s a shame that the big Java technologies are so buggy (Memcached of course could even be used with Java).</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+TerrenceMiao" class="author">Terrence Miao</a><span class="time"> - 2012-03-14 11:06:08+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/103428354485877420656" oid="103428354485877420656" >Kieran Simpson</a></span> +1 on Memcached. In the performance tuning review in one of my previous projects, I suggested my team adding Memcached to cache directory searching result. Under the brutal management and &quot;Ils a sautÃ© a leurs pieds&quot; - people jump to their feet work environment, this suggest was simply ignored.</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+OlegKiorsak" class="author">Oleg Kiorsak</a><span class="time"> - 2012-03-14 11:10:32+1100</span><div class="comment-content">the big scalability systems like Amazon are built very differently from the typical &quot;corporate enterprise information systems&quot;... and using different level of skillset...( btw, there were some stats floating recently - showing that salaries for developers at Amazon are about twice the &quot;average&quot; in US market)... the intent of &quot;everything in one (locked) solution&quot; like Oracle &quot;SOA suite&quot; is to allegedly make most out of <i>average</i> corporate developers... and in the (C-level) circles that Oracle is usually pitched and sold at, the developers are most likely seen and though of more like some sort of &quot;code monkeys&quot;, so things are intentionally &quot;made easy&quot;... as a result like in any &quot;comprehensive&quot;  frameworks/platforms/<br>suite&quot; the trivial (&quot;demoware&quot;-class) problems are made really really easy, whereas more complex ones are made harder because one has to fight the constraints and the bugs of the &quot;suite&quot;...</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/103428354485877420656" class="author">Kieran Simpson</a><span class="time"> - 2012-03-14 11:20:16+1100</span><div class="comment-content">^ Who&#39;d of thought that hiring knowledgeable people and purchasing modular tools would result in a more robust and flexible implementation.  I should go write that silver bullet now and make loads of cash. ^</div></div><div class="comment"><a target="_blank" href="https://plus.google.com/+OlegKiorsak" class="author">Oleg Kiorsak</a><span class="time"> - 2012-03-14 11:36:13+1100</span><span> - Updated: 2012-03-14 11:37:26+1100</span><div class="comment-content"><span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/103428354485877420656" oid="103428354485877420656" >Kieran Simpson</a></span> I actually once attended a course by a guy who does something essentially along these very lines ;)<br>except, being genuinely smart, wise and logical he doesn&#39;t bill anything as a &#39;silver&#39; bullet<br>see &quot;Advanced Distributed Systems Design&quot; at <a rel="nofollow" target="_blank" href="http://www.udidahan.com/training/" class="ot-anchor bidi_isolate" jslog="10929; track:click" dir="ltr">http://www.udidahan.com/training/</a> <br>you might of actually heard about him and his ideas, although due to historical reasons, he is much more known in .NET world - but the concepts and principles are applicable on any platform...<br>also, during the course many concept were illustrated using examples from Amazon, eBay etc so one could really see and start to realise how <i>different</i> those systems are...</div></div></div></body></html>